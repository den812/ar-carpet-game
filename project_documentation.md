# ðŸ“š Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° AR Carpet Game

## ðŸŽ¯ ÐžÐ±Ð·Ð¾Ñ€ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

**AR Carpet Game** - Ð¸Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ð°Ñ Ð¸Ð³Ñ€Ð° Ñ Ð¼Ð°ÑˆÐ¸Ð½ÐºÐ°Ð¼Ð¸ Ð½Ð° Ð´ÐµÑ‚ÑÐºÐ¾Ð¼ ÐºÐ¾Ð²Ñ€Ðµ Ñ Ð´Ð¾Ñ€Ð¾Ð³Ð°Ð¼Ð¸. ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ Ñ‚Ñ€Ð¸ Ñ€ÐµÐ¶Ð¸Ð¼Ð°: AR (Ð´Ð¾Ð¿Ð¾Ð»Ð½ÐµÐ½Ð½Ð°Ñ Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ), TOUCH (ÑÐµÐ½ÑÐ¾Ñ€Ð½Ð¾Ðµ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ) Ð¸ GYRO (Ð³Ð¸Ñ€Ð¾ÑÐºÐ¾Ð¿).

---

## ðŸ“ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

```
ar-carpet-game/
â”œâ”€â”€ index.html              # Ð“Ð»Ð°Ð²Ð½Ð°Ñ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ð°
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ carpet-scan.jpg     # Ð¢ÐµÐºÑÑ‚ÑƒÑ€Ð° ÐºÐ¾Ð²Ñ€Ð°
â”‚   â””â”€â”€ models/             # 3D Ð¼Ð¾Ð´ÐµÐ»Ð¸ Ð¼Ð°ÑˆÐ¸Ð½
â”‚       â”œâ”€â”€ Buggy.glb
â”‚       â”œâ”€â”€ CesiumMilkTruck.glb
â”‚       â””â”€â”€ Duck.glb
â””â”€â”€ src/
    â”œâ”€â”€ main.js             # Ð¢Ð¾Ñ‡ÐºÐ° Ð²Ñ…Ð¾Ð´Ð°
    â”œâ”€â”€ config.js           # ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ
    â”œâ”€â”€ ar_webxr.js         # AR Ñ€ÐµÐ¶Ð¸Ð¼ (WebXR)
    â”œâ”€â”€ nonAr.js            # TOUCH/GYRO Ñ€ÐµÐ¶Ð¸Ð¼Ñ‹
    â”œâ”€â”€ cars/               # Ð›Ð¾Ð³Ð¸ÐºÐ° Ð¼Ð°ÑˆÐ¸Ð½
    â”‚   â”œâ”€â”€ Car.js
    â”‚   â””â”€â”€ CarModels.js
    â”œâ”€â”€ roads/              # Ð”Ð¾Ñ€Ð¾Ð¶Ð½Ð°Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð°
    â”‚   â”œâ”€â”€ roadNetwork.js
    â”‚   â””â”€â”€ road_system.js
    â”œâ”€â”€ traffic/            # Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ‚Ñ€Ð°Ñ„Ð¸ÐºÐ¾Ð¼
    â”‚   â””â”€â”€ traffic_manager.js
    â””â”€â”€ ui/                 # ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ð¹ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ
        â”œâ”€â”€ StartScreen.js
        â”œâ”€â”€ ModeUI.js
        â”œâ”€â”€ StatsPanel.js
        â””â”€â”€ ControlPanel.js
```

---

## ðŸ“„ ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð¾Ð²

### ðŸ  ÐšÐ¾Ñ€Ð½ÐµÐ²Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹

#### `index.html`
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: Ð“Ð»Ð°Ð²Ð½Ð°Ñ HTML ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ

**ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹**:
- Import map Ð´Ð»Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Three.js Ð¸ MindAR Ð¸Ð· CDN
- Ð¡Ñ‚Ð°Ñ€Ñ‚Ð¾Ð²Ñ‹Ð¹ ÑÐºÑ€Ð°Ð½ Ñ Ð²Ñ‹Ð±Ð¾Ñ€Ð¾Ð¼ Ñ€ÐµÐ¶Ð¸Ð¼Ð° (`#start`)
- AR ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ (`#ar-container`)
- ÐŸÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°Ñ‚ÐµÐ»ÑŒ Ñ€ÐµÐ¶Ð¸Ð¼Ð¾Ð² (`#mode-ui`)
- ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ (ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°, ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ, Ð¸Ð½Ð²ÐµÑ€ÑÐ¸Ñ, Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ° Ð´Ð¾Ñ€Ð¾Ð³)

**Ð¡Ñ‚Ð¸Ð»Ð¸**:
- ÐÐ´Ð°Ð¿Ñ‚Ð¸Ð²Ð½Ñ‹Ð¹ Ð´Ð¸Ð·Ð°Ð¹Ð½ Ð´Ð»Ñ Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ñ… Ð¸ Ð´ÐµÑÐºÑ‚Ð¾Ð¿Ð¾Ð²
- ÐÐµÐ¾Ð½Ð¾Ð²Ñ‹Ð¹ ÑÑ‚Ð¸Ð»ÑŒ ÐºÐ½Ð¾Ð¿Ð¾Ðº (Ð·ÐµÐ»ÐµÐ½Ñ‹Ð¹ Ð³Ñ€Ð°Ð´Ð¸ÐµÐ½Ñ‚)
- Ð¤Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ UI ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²

---

### âš™ï¸ ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð¼Ð¾Ð´ÑƒÐ»Ð¸

#### `src/main.js`
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: Ð¢Ð¾Ñ‡ÐºÐ° Ð²Ñ…Ð¾Ð´Ð° Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ, ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ€ÐµÐ¶Ð¸Ð¼Ð°Ð¼Ð¸

**Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸**:
- `run(mode, settings)` - Ð—Ð°Ð¿ÑƒÑÐº Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ð¾Ð³Ð¾ Ñ€ÐµÐ¶Ð¸Ð¼Ð° (AR/TOUCH/GYRO)
- `changeMode(mode)` - ÐŸÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ð¼ÐµÐ¶Ð´Ñƒ Ñ€ÐµÐ¶Ð¸Ð¼Ð°Ð¼Ð¸
- Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ ÑÑ‚Ð°Ñ€Ñ‚Ð¾Ð²Ð¾Ð³Ð¾ ÑÐºÑ€Ð°Ð½Ð° Ð¸ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°Ñ‚ÐµÐ»Ñ Ñ€ÐµÐ¶Ð¸Ð¼Ð¾Ð²

**Ð›Ð¾Ð³Ð¸ÐºÐ°**:
1. ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð²Ñ‹Ð±Ð¸Ñ€Ð°ÐµÑ‚ Ñ€ÐµÐ¶Ð¸Ð¼ Ð½Ð° ÑÑ‚Ð°Ñ€Ñ‚Ð¾Ð²Ð¾Ð¼ ÑÐºÑ€Ð°Ð½Ðµ
2. Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ñ€ÐµÐ¶Ð¸Ð¼Ð° Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº Ð² localStorage
3. Ð—Ð°Ð¿ÑƒÑÐº ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ³Ð¾ Ð¼Ð¾Ð´ÑƒÐ»Ñ (AR Ð¸Ð»Ð¸ nonAR)
4. ÐŸÑ€Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐµ AR - Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ð½Ð° TOUCH

#### `src/config.js`
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: Ð¦ÐµÐ½Ñ‚Ñ€Ð°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð½Ð°Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ

**ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹**:
- `carScales` - ÐœÐ°ÑÑˆÑ‚Ð°Ð±Ñ‹ 3D Ð¼Ð¾Ð´ÐµÐ»ÐµÐ¹ Ð¼Ð°ÑˆÐ¸Ð½
  - Buggy: 0.3x
  - Duck: 10x
  - Milk Truck: 8.5x
- `carpet` - Ð Ð°Ð·Ð¼ÐµÑ€Ñ‹ ÐºÐ¾Ð²Ñ€Ð° (2.0 x 2.5 Ð¼)
- `camera` - ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ ÐºÐ°Ð¼ÐµÑ€Ñ‹ (FOV, Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ)
- `cars` - ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾, ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ, Ð²Ñ‹ÑÐ¾Ñ‚Ð° Ð¼Ð°ÑˆÐ¸Ð½
- `lighting` - ÐžÑÐ²ÐµÑ‰ÐµÐ½Ð¸Ðµ ÑÑ†ÐµÐ½Ñ‹
- `controls` - Ð§ÑƒÐ²ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ
- `roads` - ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð´Ð¾Ñ€Ð¾Ð³ (ÑˆÐ¸Ñ€Ð¸Ð½Ð° Ð¿Ð¾Ð»Ð¾ÑÑ‹)

**Ð’ÑÐ¿Ð¾Ð¼Ð¾Ð³Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸**:
- `getCarScale(modelName)` - ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð¼Ð°ÑÑˆÑ‚Ð°Ð± Ð¼Ð¾Ð´ÐµÐ»Ð¸
- `updateConfig(path, value)` - ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸

---

### ðŸš— ÐœÐ¾Ð´ÑƒÐ»ÑŒ Ð¼Ð°ÑˆÐ¸Ð½

#### `src/cars/Car.js`
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: ÐšÐ»Ð°ÑÑ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð¾Ð¹ Ð¼Ð°ÑˆÐ¸Ð½Ñ‹

**Ð¡Ð²Ð¾Ð¹ÑÑ‚Ð²Ð°**:
- `model` - 3D Ð¼Ð¾Ð´ÐµÐ»ÑŒ (Three.js Group/Mesh)
- `roadNetwork` - Ð¡ÑÑ‹Ð»ÐºÐ° Ð½Ð° Ð´Ð¾Ñ€Ð¾Ð¶Ð½ÑƒÑŽ ÑÐµÑ‚ÑŒ
- `path` - ÐœÐ°ÑÑÐ¸Ð² ÑƒÐ·Ð»Ð¾Ð² Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð°
- `currentPathIndex` - Ð¢ÐµÐºÑƒÑ‰Ð¸Ð¹ ÑÐµÐ³Ð¼ÐµÐ½Ñ‚ Ð¿ÑƒÑ‚Ð¸
- `progress` - ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑ Ð½Ð° Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¼ ÑÐµÐ³Ð¼ÐµÐ½Ñ‚Ðµ (0-1)
- `currentSpeed` - Ð¢ÐµÐºÑƒÑ‰Ð°Ñ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ
- `currentLane` - Ð¢ÐµÐºÑƒÑ‰Ð°Ñ Ð¿Ð¾Ð»Ð¾ÑÐ° Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ
- `targetRotation` / `currentRotation` - Ð£Ð³Ð»Ñ‹ Ð¿Ð¾Ð²Ð¾Ñ€Ð¾Ñ‚Ð°

**ÐœÐµÑ‚Ð¾Ð´Ñ‹**:
- `spawn(startNode, endNode)` - Ð Ð°Ð·Ð¼ÐµÑ‰ÐµÐ½Ð¸Ðµ Ð¼Ð°ÑˆÐ¸Ð½Ñ‹ Ð½Ð° Ð´Ð¾Ñ€Ð¾Ð³Ðµ
- `update()` - ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ Ð¸ Ð¿Ð¾Ð²Ð¾Ñ€Ð¾Ñ‚Ð° (ÐºÐ°Ð¶Ð´Ñ‹Ð¹ ÐºÐ°Ð´Ñ€)
- `despawn()` - Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð¼Ð°ÑˆÐ¸Ð½Ñ‹ Ñ Ð´Ð¾Ñ€Ð¾Ð³Ð¸
- `setGlobalScale(scale)` - ÐŸÑ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ð³Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¼Ð°ÑÑˆÑ‚Ð°Ð±Ð°
- `applyRandomColor()` - Ð¡Ð»ÑƒÑ‡Ð°Ð¹Ð½Ñ‹Ð¹ Ñ†Ð²ÐµÑ‚ Ð¼Ð°ÑˆÐ¸Ð½Ñ‹
- `smoothstep(t)` - ÐŸÐ»Ð°Ð²Ð½Ð°Ñ Ð¸Ð½Ñ‚ÐµÑ€Ð¿Ð¾Ð»ÑÑ†Ð¸Ñ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ

**ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸**:
- ÐÐ´Ð°Ð¿Ñ‚Ð¸Ð²Ð½Ð°Ñ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ Ð½Ð° Ð¿Ð¾Ð²Ð¾Ñ€Ð¾Ñ‚Ð°Ñ… (Ð·Ð°Ð¼ÐµÐ´Ð»ÐµÐ½Ð¸Ðµ)
- ÐŸÐ»Ð°Ð²Ð½Ð°Ñ Ð¸Ð½Ñ‚ÐµÑ€Ð¿Ð¾Ð»ÑÑ†Ð¸Ñ Ð¿Ð¾Ð²Ð¾Ñ€Ð¾Ñ‚Ð° (Ð±ÐµÐ· Ð±Ð¾ÐºÐ¾Ð²Ð¾Ð³Ð¾ ÑÐºÐ¾Ð»ÑŒÐ¶ÐµÐ½Ð¸Ñ)
- Ð”Ð²Ð¸Ð¶ÐµÐ½Ð¸Ðµ Ð¿Ð¾ Ð¿Ñ€Ð°Ð²Ð¾Ð¹ Ð¿Ð¾Ð»Ð¾ÑÐµ Ñ ÑƒÑ‡ÐµÑ‚Ð¾Ð¼ ÑÐ¼ÐµÑ‰ÐµÐ½Ð¸Ñ

#### `src/cars/CarModels.js`
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: Ð—Ð°Ð³Ñ€ÑƒÐ·Ñ‡Ð¸Ðº Ð¸ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€ 3D Ð¼Ð¾Ð´ÐµÐ»ÐµÐ¹ Ð¼Ð°ÑˆÐ¸Ð½

**ÐœÐµÑ‚Ð¾Ð´Ñ‹**:
- `loadAll()` - ÐÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ð°Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð²ÑÐµÑ… GLB Ð¼Ð¾Ð´ÐµÐ»ÐµÐ¹
- `getModelByName(name)` - ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½ÑƒÑŽ Ð¼Ð¾Ð´ÐµÐ»ÑŒ Ð¿Ð¾ Ð¸Ð¼ÐµÐ½Ð¸
- `getRandomModel()` - Ð¡Ð»ÑƒÑ‡Ð°Ð¹Ð½Ð°Ñ Ð¼Ð¾Ð´ÐµÐ»ÑŒ Ð´Ð»Ñ ÑÐ¿Ð°Ð²Ð½Ð°
- `cloneModel(originalModel)` - ÐšÐ»Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¼Ð¾Ð´ÐµÐ»Ð¸ Ð´Ð»Ñ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾Ð³Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ

**Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼Ñ‹Ðµ Ð¼Ð¾Ð´ÐµÐ»Ð¸**:
1. `Buggy.glb` - Ð‘Ð°Ð³Ð³Ð¸ (Ð¼Ð°Ð»ÐµÐ½ÑŒÐºÐ°Ñ Ð³Ð¾Ð½Ð¾Ñ‡Ð½Ð°Ñ Ð¼Ð°ÑˆÐ¸Ð½Ð°)
2. `CesiumMilkTruck.glb` - ÐœÐ¾Ð»Ð¾ÐºÐ¾Ð²Ð¾Ð· (Ð³Ñ€ÑƒÐ·Ð¾Ð²Ð¸Ðº)
3. `Duck.glb` - Ð£Ñ‚ÐºÐ° (Ð¸Ð³Ñ€ÑƒÑˆÐµÑ‡Ð½Ð°Ñ Ð¼Ð¾Ð´ÐµÐ»ÑŒ)

---

### ðŸ›£ï¸ Ð”Ð¾Ñ€Ð¾Ð¶Ð½Ð°Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð°

#### `src/roads/roadNetwork.js`
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: Ð“Ñ€Ð°Ñ„ Ð´Ð¾Ñ€Ð¾Ð¶Ð½Ð¾Ð¹ ÑÐµÑ‚Ð¸ (ÑƒÐ·Ð»Ñ‹ Ð¸ ÑÐ¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ñ)

**Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…**:
- `nodes[]` - ÐœÐ°ÑÑÐ¸Ð² ÑƒÐ·Ð»Ð¾Ð² (Ð¿ÐµÑ€ÐµÐºÑ€ÐµÑÑ‚ÐºÐ¾Ð²) `{x, y, connections[]}`
- `roads[]` - ÐœÐ°ÑÑÐ¸Ð² Ð´Ð¾Ñ€Ð¾Ð³ `{start, end, length}`
- `lanes[]` - ÐœÐ°ÑÑÐ¸Ð² Ð¿Ð¾Ð»Ð¾Ñ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ `{start, end, direction, offset}`

**ÐœÐµÑ‚Ð¾Ð´Ñ‹**:
- `addNode(x, y)` - Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑƒÐ·ÐµÐ» (Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¾Ð¹ Ð´ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ‚Ð¾Ð²)
- `addRoad(startNode, endNode)` - Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð´Ð²ÑƒÑÑ‚Ð¾Ñ€Ð¾Ð½Ð½ÑŽÑŽ Ð´Ð¾Ñ€Ð¾Ð³Ñƒ
  - ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ 2 Ð¿Ð¾Ð»Ð¾ÑÑ‹ (Ð¿Ð¾ Ð¾Ð´Ð½Ð¾Ð¹ Ð² ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ð¸)
  - ÐŸÐ¾Ð»Ð¾ÑÑ‹ ÑÐ¼ÐµÑ‰ÐµÐ½Ñ‹ Ð¾Ñ‚ Ñ†ÐµÐ½Ñ‚Ñ€Ð° Ð´Ð¾Ñ€Ð¾Ð³Ð¸ (Ð¿Ñ€Ð°Ð²Ð¾ÑÑ‚Ð¾Ñ€Ð¾Ð½Ð½ÐµÐµ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ðµ)
- `findPath(start, end)` - A* Ð¿Ð¾Ð¸ÑÐº Ð¿ÑƒÑ‚Ð¸ Ð¼ÐµÐ¶Ð´Ñƒ ÑƒÐ·Ð»Ð°Ð¼Ð¸
- `getLane(fromNode, toNode)` - ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð»Ð¾ÑÑƒ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ
- `getClosestNode(x, y)` - Ð‘Ð»Ð¸Ð¶Ð°Ð¹ÑˆÐ¸Ð¹ ÑƒÐ·ÐµÐ» Ðº ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ð°Ð¼
- `getStats()` - Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° ÑÐµÑ‚Ð¸

**ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸**:
- ÐŸÑ€Ð°Ð²Ð¾ÑÑ‚Ð¾Ñ€Ð¾Ð½Ð½ÐµÐµ Ð´Ð²ÑƒÑÑ‚Ð¾Ñ€Ð¾Ð½Ð½ÐµÐµ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ðµ
- Ð¡Ð¼ÐµÑ‰ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»Ð¾Ñ: `0.02` (1/4 ÑˆÐ¸Ñ€Ð¸Ð½Ñ‹ Ð´Ð¾Ñ€Ð¾Ð³Ð¸)
- A* Ð°Ð»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼ Ñ ÑÐ²Ñ€Ð¸ÑÑ‚Ð¸ÐºÐ¾Ð¹ Ñ€Ð°ÑÑÑ‚Ð¾ÑÐ½Ð¸Ñ

#### `src/roads/road_system.js`
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð¹ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñ‹ Ð´Ð¾Ñ€Ð¾Ð³ Ð¿Ð¾ ÐºÐ¾Ð²Ñ€Ñƒ

**Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð´Ð¾Ñ€Ð¾Ð³** (Ð¿Ð¾ carpet-scan.jpg):
1. **3 ÐºÑ€ÑƒÐ³Ð¾Ð²Ñ‹Ðµ Ñ€Ð°Ð·Ð²ÑÐ·ÐºÐ¸** (Ð»ÐµÐ²Ð°Ñ ÑÑ‚Ð¾Ñ€Ð¾Ð½Ð° ÐºÐ¾Ð²Ñ€Ð°):
   - Ð’ÐµÑ€Ñ…Ð½ÑÑ: `(-0.65, 0.85)`
   - Ð¡Ñ€ÐµÐ´Ð½ÑÑ: `(-0.70, 0.0)`
   - ÐÐ¸Ð¶Ð½ÑÑ: `(-0.65, -0.85)`
   - Ð Ð°Ð´Ð¸ÑƒÑ ÐºÐ°Ð¶Ð´Ð¾Ð¹: `0.12`

2. **ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð´Ð¾Ñ€Ð¾Ð³Ð¸**:
   - Ð’ÐµÑ€Ñ…Ð½ÑÑ Ð¸Ð·Ð²Ð¸Ð»Ð¸ÑÑ‚Ð°Ñ (S-Ð¾Ð±Ñ€Ð°Ð·Ð½Ð°Ñ)
   - ÐŸÑ€Ð°Ð²Ð°Ñ Ð¸Ð·Ð²Ð¸Ð»Ð¸ÑÑ‚Ð°Ñ (Ð²Ð¾Ð»Ð½Ð¾Ð¾Ð±Ñ€Ð°Ð·Ð½Ð°Ñ)
   - ÐÐ¸Ð¶Ð½ÑÑ Ð¸Ð·Ð²Ð¸Ð»Ð¸ÑÑ‚Ð°Ñ
   - Ð›ÐµÐ²Ð°Ñ (ÑÐ¾ÐµÐ´Ð¸Ð½ÑÐµÑ‚ Ñ€Ð°Ð·Ð²ÑÐ·ÐºÐ¸)

3. **Ð’Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½Ð¸Ðµ ÑÐ¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ñ**:
   - ÐžÑ‚ Ñ€Ð°Ð·Ð²ÑÐ·Ð¾Ðº Ðº Ñ†ÐµÐ½Ñ‚Ñ€Ñƒ
   - Ð¦ÐµÐ½Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð³Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð´Ð¾Ñ€Ð¾Ð³Ð¸
   - ÐŸÐµÑ€ÐµÐºÑ€ÐµÑÑ‚ÐºÐ¸

**Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ** `createRoadNetwork(parent, options)`:
- Ð¡Ð¾Ð·Ð´Ð°ÐµÑ‚ Ð²ÑÐµ ÑƒÐ·Ð»Ñ‹ Ð¸ ÑÐ¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ñ
- ÐžÐ¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ Ð²Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÑ‚ Ð´Ð¾Ñ€Ð¾Ð³Ð¸ (Ð´Ð»Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸):
  - Ð¡ÐµÑ€Ñ‹Ðµ Ð´Ð¾Ñ€Ð¾Ð¶Ð½Ñ‹Ðµ ÑÐµÐ³Ð¼ÐµÐ½Ñ‚Ñ‹
  - Ð‘ÐµÐ»Ñ‹Ðµ Ð¿ÑƒÐ½ÐºÑ‚Ð¸Ñ€Ð½Ñ‹Ðµ Ñ†ÐµÐ½Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð»Ð¸Ð½Ð¸Ð¸
  - ÐšÑ€ÑƒÐ³Ð¾Ð²Ñ‹Ðµ Ñ€Ð°Ð·Ð²ÑÐ·ÐºÐ¸ Ñ Ð·ÐµÐ»ÐµÐ½Ñ‹Ð¼ Ñ†ÐµÐ½Ñ‚Ñ€Ð¾Ð¼
  - Ð–ÐµÐ»Ñ‚Ñ‹Ðµ ÐºÑ€ÑƒÐ³Ð¸ Ð² Ñ†ÐµÐ½Ñ‚Ñ€Ðµ Ñ€Ð°Ð·Ð²ÑÐ·Ð¾Ðº

**ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹**:
- `parent` - Three.js Group Ð´Ð»Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð²Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸
- `options.showRoads` - ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð²Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸ÑŽ Ð´Ð¾Ñ€Ð¾Ð³ (boolean)

---

### ðŸš¦ Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ‚Ñ€Ð°Ñ„Ð¸ÐºÐ¾Ð¼

#### `src/traffic/traffic_manager.js`
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: Ð¡Ð¿Ð°Ð²Ð½ Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð²ÑÐµÑ… Ð¼Ð°ÑˆÐ¸Ð½ Ð½Ð° Ð´Ð¾Ñ€Ð¾Ð³Ðµ

**Ð¡Ð²Ð¾Ð¹ÑÑ‚Ð²Ð°**:
- `cars[]` - ÐœÐ°ÑÑÐ¸Ð² Ð²ÑÐµÑ… Ð¼Ð°ÑˆÐ¸Ð½
- `carModels` - Ð­ÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€ CarModels
- `globalScaleMultiplier` - ÐžÐ±Ñ‰Ð¸Ð¹ Ð¼Ð°ÑÑˆÑ‚Ð°Ð± Ð²ÑÐµÑ… Ð¼Ð°ÑˆÐ¸Ð½
- `isInitialized` - Ð¤Ð»Ð°Ð³ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸

**ÐœÐµÑ‚Ð¾Ð´Ñ‹**:
- `init()` - Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ (Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¼Ð¾Ð´ÐµÐ»ÐµÐ¹)
- `spawnCars(count)` - Ð¡Ð¿Ð°Ð²Ð½ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¸Ñ… Ð¼Ð°ÑˆÐ¸Ð½
  - Ð Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ: 3 Buggy, 2 Truck, 2 Duck
- `spawnCarWithModel(modelData)` - Ð¡Ð¿Ð°Ð²Ð½ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð¹ Ð¼Ð¾Ð´ÐµÐ»Ð¸
  - Ð¡Ð¾Ð·Ð´Ð°ÐµÑ‚ Ð½Ð¾Ð²ÑƒÑŽ Ð¼Ð°ÑˆÐ¸Ð½Ñƒ
  - Ð’Ñ‹Ð±Ð¸Ñ€Ð°ÐµÑ‚ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ñ‹Ð¹ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚
  - ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ÑÑ‚ÑŒ ÑÐ¿Ð°Ð²Ð½Ð°
- `update()` - ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð²ÑÐµÑ… Ð¼Ð°ÑˆÐ¸Ð½ (ÐºÐ°Ð¶Ð´Ñ‹Ð¹ ÐºÐ°Ð´Ñ€)
  - ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð»Ð»Ð¸Ð·Ð¸Ð¹ Ð¼ÐµÐ¶Ð´Ñƒ Ð¼Ð°ÑˆÐ¸Ð½Ð°Ð¼Ð¸
  - ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹
  - Ð ÐµÑÐ¿Ð°Ð²Ð½ Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ð²ÑˆÐ¸Ñ… Ð¿ÑƒÑ‚ÑŒ
- `setGlobalScale(scale)` - Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¼Ð°ÑÑˆÑ‚Ð°Ð± Ð²ÑÐµÑ… Ð¼Ð°ÑˆÐ¸Ð½
- `getStats()` - Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° (Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð¼Ð°ÑˆÐ¸Ð½Ñ‹, Ð² Ð¿ÑƒÐ»Ðµ)
- `dispose()` - ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° (ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð²ÑÐµÑ… Ð¼Ð°ÑˆÐ¸Ð½)

**Ð›Ð¾Ð³Ð¸ÐºÐ° ÐºÐ¾Ð»Ð»Ð¸Ð·Ð¸Ð¹**:
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ€Ð°ÑÑÑ‚Ð¾ÑÐ½Ð¸Ñ Ð¼ÐµÐ¶Ð´Ñƒ Ð¼Ð°ÑˆÐ¸Ð½Ð°Ð¼Ð¸
- Ð’Ñ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¿Ñ€Ð¸ ÑÐ±Ð»Ð¸Ð¶ÐµÐ½Ð¸Ð¸
- ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð²Ð¾Ð·Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ

---

### ðŸŽ® Ð ÐµÐ¶Ð¸Ð¼Ñ‹ Ð¸Ð³Ñ€Ñ‹

#### `src/ar_webxr.js`
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: AR Ñ€ÐµÐ¶Ð¸Ð¼ Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ WebXR

**ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸**:
- WebXR API Ð´Ð»Ñ AR (Ð±ÐµÐ· MindAR)
- Hit-test Ð´Ð»Ñ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð²ÐµÑ€Ñ…Ð½Ð¾ÑÑ‚ÐµÐ¹
- ÐšÐ°Ð»Ð¸Ð±Ñ€Ð¾Ð²ÐºÐ° ÐºÐ¾Ð²Ñ€Ð° (Ð¼Ð°ÑÑˆÑ‚Ð°Ð± + Ð¿Ð¾Ð²Ð¾Ñ€Ð¾Ñ‚)
- DOM-overlay Ð´Ð»Ñ UI Ð¿Ð¾Ð²ÐµÑ€Ñ… AR

**Ð­Ñ‚Ð°Ð¿Ñ‹ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹**:
1. **Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ**:
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸ WebXR
   - Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Three.js ÑÑ†ÐµÐ½Ñ‹ Ñ `renderer.xr.enabled = true`
   - ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° Ð¸Ð³Ñ€Ð¾Ð²Ð¾Ð¹ Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹ (carpetGroup)

2. **Ð Ð°Ð·Ð¼ÐµÑ‰ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð²Ñ€Ð°**:
   - Hit-test Ð´Ð»Ñ Ð¿Ð¾Ð¸ÑÐºÐ° Ð³Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ð¿Ð¾Ð²ÐµÑ€Ñ…Ð½Ð¾ÑÑ‚ÐµÐ¹
   - Ð’Ð¸Ð·ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¼Ð°Ñ€ÐºÐµÑ€ (reticle) - Ð·ÐµÐ»ÐµÐ½Ð¾Ðµ ÐºÐ¾Ð»ÑŒÑ†Ð¾
   - ÐšÐ½Ð¾Ð¿ÐºÐ° "Ð ÐÐ—ÐœÐ•Ð¡Ð¢Ð˜Ð¢Ð¬ ÐšÐžÐ’Ð•Ð "
   - Ð Ð°Ð·Ð¼ÐµÑ‰ÐµÐ½Ð¸Ðµ Ð½Ð° 1ÑÐ¼ Ð½Ð°Ð´ Ð¿Ð¾Ð²ÐµÑ€Ñ…Ð½Ð¾ÑÑ‚ÑŒÑŽ

3. **ÐšÐ°Ð»Ð¸Ð±Ñ€Ð¾Ð²ÐºÐ°**:
   - ÐœÐ°ÑÑˆÑ‚Ð°Ð±: Â±0.05 (Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½ 0.5-2.0x)
   - ÐŸÐ¾Ð²Ð¾Ñ€Ð¾Ñ‚: Â±3Â° (Math.PI/60)
   - ÐšÐ½Ð¾Ð¿ÐºÐ° "Ð“ÐžÐ¢ÐžÐ’Ðž" Ð´Ð»Ñ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ

4. **Ð˜Ð³Ñ€Ð°**:
   - Ð¡Ð¿Ð°Ð²Ð½ 7 Ð¼Ð°ÑˆÐ¸Ð½ Ð¿Ð¾ÑÐ»Ðµ ÐºÐ°Ð»Ð¸Ð±Ñ€Ð¾Ð²ÐºÐ¸
   - ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¼Ð°ÑˆÐ¸Ð½ Ð² render loop
   - Hit-test Ð¾Ñ‚ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ÑÑ Ð¿Ð¾ÑÐ»Ðµ Ñ€Ð°Ð·Ð¼ÐµÑ‰ÐµÐ½Ð¸Ñ

**UI ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹**:
- Debug logger (ÐºÐ½Ð¾Ð¿ÐºÐ° ðŸ›)
- ÐŸÐ°Ð½ÐµÐ»ÑŒ ÐºÐ°Ð»Ð¸Ð±Ñ€Ð¾Ð²ÐºÐ¸
- Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸
- AR ÐºÐ½Ð¾Ð¿ÐºÐ° Ð·Ð°Ð¿ÑƒÑÐºÐ°
- StatsPanel Ð¸ ControlPanel

**Ð˜Ð¡ÐŸÐ ÐÐ’Ð›Ð•ÐÐ˜Ð¯ V16**:
- âœ… Hit-test Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð”Ðž ÐºÐ°Ð»Ð¸Ð±Ñ€Ð¾Ð²ÐºÐ¸
- âœ… ÐŸÐ¾ÑÐ»Ðµ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°ÐµÑ‚ÑÑ Ñ€ÐµÐ½Ð´ÐµÑ€Ð¸Ð½Ð³
- âœ… ÐÐµÑ‚ Ð·Ð°Ð²Ð¸ÑÐ°Ð½Ð¸Ñ Ð¿Ð¾ÑÐ»Ðµ Ð½Ð°Ð¶Ð°Ñ‚Ð¸Ñ "Ð“ÐžÐ¢ÐžÐ’Ðž"

#### `src/nonAr.js`
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: TOUCH Ð¸ GYRO Ñ€ÐµÐ¶Ð¸Ð¼Ñ‹ (Ð±ÐµÐ· AR)

**Ð ÐµÐ¶Ð¸Ð¼ TOUCH**:
- ÐžÑ€Ð±Ð¸Ñ‚Ð°Ð»ÑŒÐ½Ð°Ñ ÐºÐ°Ð¼ÐµÑ€Ð° Ð²Ð¾ÐºÑ€ÑƒÐ³ ÐºÐ¾Ð²Ñ€Ð°
- Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¼Ñ‹ÑˆÑŒÑŽ:
  - Ð—Ð°Ð¶Ð°Ñ‚Ð¸Ðµ Ð›ÐšÐœ + Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ðµ = Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ðµ
  - ÐšÐ¾Ð»ÐµÑÐ¾ Ð¼Ñ‹ÑˆÐ¸ = Ð·ÑƒÐ¼ (1.0 - 6.0)
- Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ‚Ð°Ñ‡ÐµÐ¼:
  - 1 Ð¿Ð°Ð»ÐµÑ† = Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ðµ
  - 2 Ð¿Ð°Ð»ÑŒÑ†Ð° = Ð·ÑƒÐ¼ (pinch)

**Ð ÐµÐ¶Ð¸Ð¼ GYRO**:
- Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð³Ð¸Ñ€Ð¾ÑÐºÐ¾Ð¿Ð¾Ð¼ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°
- Ð—Ð°Ð¿Ñ€Ð¾Ñ Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ñ (iOS 13+)
- ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ðµ ÐºÐ°Ð¼ÐµÑ€Ñ‹ Ð¿Ð¾ Ð´Ð°Ñ‚Ñ‡Ð¸ÐºÐ°Ð¼
- ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° `deviceorientation` ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹

**ÐžÐ±Ñ‰ÐµÐµ**:
- Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ñ‚ÐµÐºÑÑ‚ÑƒÑ€Ñ‹ ÐºÐ¾Ð²Ñ€Ð° (`carpet-scan.jpg`)
- ÐÐµÐ±ÐµÑÐ½Ñ‹Ð¹ Ñ„Ð¾Ð½ (`0x87CEEB`)
- ÐžÑÐ²ÐµÑ‰ÐµÐ½Ð¸Ðµ: Ambient + Directional
- Ð˜Ð½Ð²ÐµÑ€ÑÐ¸Ñ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ (Ð¾Ð¿Ñ†Ð¸Ñ)

**Ð¡Ñ„ÐµÑ€Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÐºÐ°Ð¼ÐµÑ€Ð°**:
```javascript
radius = 2.5  // Ð Ð°ÑÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð¾Ñ‚ Ñ†ÐµÐ½Ñ‚Ñ€Ð°
theta = 0.5   // Ð£Ð³Ð¾Ð» Ð°Ð·Ð¸Ð¼ÑƒÑ‚Ð°
phi = 1.1     // Ð£Ð³Ð¾Ð» Ð²Ð¾Ð·Ð²Ñ‹ÑˆÐµÐ½Ð¸Ñ

position.x = radius * sin(phi) * sin(theta)
position.y = radius * cos(phi)
position.z = radius * sin(phi) * cos(theta)
```

---

### ðŸŽ¨ ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ð¹ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ

#### `src/ui/StartScreen.js`
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: Ð¡Ñ‚Ð°Ñ€Ñ‚Ð¾Ð²Ñ‹Ð¹ ÑÐºÑ€Ð°Ð½ Ñ Ð²Ñ‹Ð±Ð¾Ñ€Ð¾Ð¼ Ñ€ÐµÐ¶Ð¸Ð¼Ð°

**Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ**:
- ÐŸÐ¾ÐºÐ°Ð· ÑÐºÑ€Ð°Ð½Ð° Ð¿Ñ€Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ
- ÐšÐ½Ð¾Ð¿ÐºÐ¸ Ð²Ñ‹Ð±Ð¾Ñ€Ð° Ñ€ÐµÐ¶Ð¸Ð¼Ð° (AR/TOUCH/GYRO)
- Ð§ÐµÐºÐ±Ð¾ÐºÑÑ‹ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº:
  - ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÑƒ
  - ÐŸÐ°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð¼Ð°ÑˆÐ¸Ð½ÐºÐ°Ð¼Ð¸
  - Ð˜Ð½Ð²ÐµÑ€ÑÐ¸Ñ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ
  - ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð´Ð¾Ñ€Ð¾Ð³Ð¸ (Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ°)
- Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº Ð² localStorage
- Ð¡ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ ÑÐºÑ€Ð°Ð½Ð° Ð¿Ð¾ÑÐ»Ðµ Ð²Ñ‹Ð±Ð¾Ñ€Ð° Ñ€ÐµÐ¶Ð¸Ð¼Ð°

**ÐœÐµÑ‚Ð¾Ð´** `initStartScreen(onStart)`:
- `onStart(mode, settings)` - Callback Ð¿Ñ€Ð¸ Ð²Ñ‹Ð±Ð¾Ñ€Ðµ Ñ€ÐµÐ¶Ð¸Ð¼Ð°

#### `src/ui/ModeUI.js`
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: ÐŸÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°Ñ‚ÐµÐ»ÑŒ Ñ€ÐµÐ¶Ð¸Ð¼Ð¾Ð² Ð²Ð¾ Ð²Ñ€ÐµÐ¼Ñ Ð¸Ð³Ñ€Ñ‹

**Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ**:
- ÐšÐ½Ð¾Ð¿ÐºÐ¸ AR/TOUCH/GYRO Ð² Ð²ÐµÑ€Ñ…Ð½ÐµÐ¹ Ñ‡Ð°ÑÑ‚Ð¸ ÑÐºÑ€Ð°Ð½Ð°
- Ð¡ÐºÑ€Ñ‹Ñ‚ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ
- ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð¿Ð¾ÑÐ»Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ° Ð¸Ð³Ñ€Ñ‹
- ÐŸÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹ Ð¿Ñ€Ð¸ ÑÐ¼ÐµÐ½Ðµ Ñ€ÐµÐ¶Ð¸Ð¼Ð°

**ÐœÐµÑ‚Ð¾Ð´** `initModeUI(onModeChange)`:
- `onModeChange(mode)` - Callback Ð¿Ñ€Ð¸ ÑÐ¼ÐµÐ½Ðµ Ñ€ÐµÐ¶Ð¸Ð¼Ð°

#### `src/ui/StatsPanel.js`
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: ÐŸÐ°Ð½ÐµÐ»ÑŒ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸ (FPS, Ð¼Ð°ÑˆÐ¸Ð½Ñ‹, Ñ€ÐµÐ¶Ð¸Ð¼)

**ÐžÑ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°ÐµÐ¼Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ**:
- Ð ÐµÐ¶Ð¸Ð¼ Ð¸Ð³Ñ€Ñ‹ (AR/TOUCH/GYRO)
- Tracking ÑÑ‚Ð°Ñ‚ÑƒÑ (Ð´Ð»Ñ AR)
- ÐŸÐ°ÑƒÐ·Ð°
- ÐÐºÑ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð¼Ð°ÑˆÐ¸Ð½Ñ‹
- ÐœÐ°ÑˆÐ¸Ð½Ñ‹ Ð² Ð¿ÑƒÐ»Ðµ
- Ð“Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¼Ð°ÑÑˆÑ‚Ð°Ð±
- Ð Ð°Ð´Ð¸ÑƒÑ ÐºÐ°Ð¼ÐµÑ€Ñ‹ (Ð´Ð»Ñ TOUCH/GYRO)

**ÐœÐµÑ‚Ð¾Ð´Ñ‹**:
- `show()` - ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¿Ð°Ð½ÐµÐ»ÑŒ
- `update(data)` - ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ
- `hide()` - Ð¡ÐºÑ€Ñ‹Ñ‚ÑŒ Ð¿Ð°Ð½ÐµÐ»ÑŒ

**Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸**:
- Ð¡Ð²Ð¾Ñ€Ð°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ðµ/Ñ€Ð°Ð·Ð²Ð¾Ñ€Ð°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ðµ (ÐºÐ»Ð¸Ðº Ð½Ð° Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº)
- ÐšÐ¾Ð¼Ð¿Ð°ÐºÑ‚Ð½Ñ‹Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼ Ð´Ð»Ñ Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ñ…
- Ð˜ÐºÐ¾Ð½ÐºÐ° â–¼/â–² Ð´Ð»Ñ Ð¸Ð½Ð´Ð¸ÐºÐ°Ñ†Ð¸Ð¸ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ

#### `src/ui/ControlPanel.js`
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: ÐŸÐ°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð¼Ð°ÑˆÐ¸Ð½ÐºÐ°Ð¼Ð¸

**Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð¹ Ð¼Ð¾Ð´ÐµÐ»Ð¸**:
- **ÐœÐ°ÑÑˆÑ‚Ð°Ð±**: Ð¡Ð»Ð°Ð¹Ð´ÐµÑ€ 0.1x - 10x
- **ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾**: Ð¡Ð»Ð°Ð¹Ð´ÐµÑ€ 0 - 10 Ð¼Ð°ÑˆÐ¸Ð½
- **ÐšÐ½Ð¾Ð¿ÐºÐ¸**:
  - `+` - Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ð´Ð½Ñƒ Ð¼Ð°ÑˆÐ¸Ð½Ñƒ
  - `-` - Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¾Ð´Ð½Ñƒ Ð¼Ð°ÑˆÐ¸Ð½Ñƒ
- **Ð¡Ñ‡ÐµÑ‚Ñ‡Ð¸Ðº**: Ð¢ÐµÐºÑƒÑ‰ÐµÐµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¼Ð°ÑˆÐ¸Ð½

**Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾**:
- ÐšÐ½Ð¾Ð¿ÐºÐ° "Ð¡Ð‘Ð ÐžÐ¡Ð˜Ð¢Ð¬" - Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ Ðº Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ñ‹Ð¼ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°Ð¼
- ÐžÑ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¾Ð±Ñ‰ÐµÐ³Ð¾ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð° Ð¼Ð°ÑˆÐ¸Ð½
- Ð¡Ð²Ð¾Ñ€Ð°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ðµ/Ñ€Ð°Ð·Ð²Ð¾Ñ€Ð°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ðµ Ð¿Ð°Ð½ÐµÐ»Ð¸

**ÐœÐ¾Ð´ÐµÐ»Ð¸** (Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ):
1. ðŸŽï¸ Buggy - 3 ÑˆÑ‚, Ð¼Ð°ÑÑˆÑ‚Ð°Ð± 1.0x
2. ðŸšš Milk Truck - 2 ÑˆÑ‚, Ð¼Ð°ÑÑˆÑ‚Ð°Ð± 1.0x
3. ðŸ¦† Duck - 2 ÑˆÑ‚, Ð¼Ð°ÑÑˆÑ‚Ð°Ð± 1.0x

**ÐœÐµÑ‚Ð¾Ð´Ñ‹**:
- `show()` / `hide()` - ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ/ÑÐºÑ€Ñ‹Ñ‚ÑŒ
- `toggle()` - Ð¡Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ/Ñ€Ð°Ð·Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ
- `spawnSpecificModel(modelName)` - Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¼Ð°ÑˆÐ¸Ð½Ñƒ
- `removeSpecificModel(modelName)` - Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¼Ð°ÑˆÐ¸Ð½Ñƒ
- `setModelCount(modelName, count)` - Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾
- `updateModelScale(modelName, scale)` - Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¼Ð°ÑÑˆÑ‚Ð°Ð±
- `resetAll()` - Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ð²ÑÐµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸

---

## ðŸ”„ ÐŸÑ€Ð¾Ñ†ÐµÑÑ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ

### ÐŸÐ¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð·Ð°Ð¿ÑƒÑÐºÐ°:

```
1. index.html Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÑ‚ÑÑ
   â†“
2. main.js Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÑ‚ÑÑ
   â†“
3. StartScreen.js Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ ÑÑ‚Ð°Ñ€Ñ‚Ð¾Ð²Ñ‹Ð¹ ÑÐºÑ€Ð°Ð½
   â†“
4. ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð²Ñ‹Ð±Ð¸Ñ€Ð°ÐµÑ‚ Ñ€ÐµÐ¶Ð¸Ð¼ + Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸
   â†“
5a. AR Ñ€ÐµÐ¶Ð¸Ð¼:                    5b. TOUCH/GYRO Ñ€ÐµÐ¶Ð¸Ð¼:
    - ar_webxr.js                   - nonAr.js
    - WebXR Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ            - Three.js ÑÑ†ÐµÐ½Ð°
    - Hit-test Ð¿Ð¾Ð¸ÑÐº Ð¿Ð¾Ð²ÐµÑ€Ñ…Ð½Ð¾ÑÑ‚Ð¸     - ÐžÑ€Ð±Ð¸Ñ‚Ð°Ð»ÑŒÐ½Ð°Ñ ÐºÐ°Ð¼ÐµÑ€Ð°
    - Ð Ð°Ð·Ð¼ÐµÑ‰ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð²Ñ€Ð°               - Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¼Ñ‹ÑˆÑŒÑŽ/Ð³Ð¸Ñ€Ð¾ÑÐºÐ¾Ð¿Ð¾Ð¼
    - ÐšÐ°Ð»Ð¸Ð±Ñ€Ð¾Ð²ÐºÐ°
    â†“
6. Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¼Ð¾Ð´ÐµÐ»ÐµÐ¹ (CarModels.js)
   â†“
7. Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð´Ð¾Ñ€Ð¾Ð¶Ð½Ð¾Ð¹ ÑÐµÑ‚Ð¸ (road_system.js)
   â†“
8. Ð¡Ð¿Ð°Ð²Ð½ Ð¼Ð°ÑˆÐ¸Ð½ (TrafficManager.js)
   â†“
9. Render loop (Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ ÐºÐ°Ð´Ñ€Ð°):
   - ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¼Ð°ÑˆÐ¸Ð½ (Car.update)
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð»Ð»Ð¸Ð·Ð¸Ð¹
   - Ð ÐµÑÐ¿Ð°Ð²Ð½ Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ð²ÑˆÐ¸Ñ… Ð¿ÑƒÑ‚ÑŒ
   - ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ UI (StatsPanel)
   â†“
10. ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¼Ð¾Ð¶ÐµÑ‚:
    - Ð£Ð¿Ñ€Ð°Ð²Ð»ÑÑ‚ÑŒ ÐºÐ°Ð¼ÐµÑ€Ð¾Ð¹
    - ÐœÐµÐ½ÑÑ‚ÑŒ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¼Ð°ÑˆÐ¸Ð½ (ControlPanel)
    - ÐŸÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°Ñ‚ÑŒ Ñ€ÐµÐ¶Ð¸Ð¼Ñ‹ (ModeUI)
```

---

## ðŸ› Ð˜ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð½Ñ‹Ðµ Ð±Ð°Ð³Ð¸

### Ð‘Ð°Ð³ #1: Ð—Ð°Ð²Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¿Ð¾ÑÐ»Ðµ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ ÐºÐ¾Ð²Ñ€Ð° (AR)
**ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°**: ÐŸÐ¾ÑÐ»Ðµ Ð½Ð°Ð¶Ð°Ñ‚Ð¸Ñ "Ð“ÐžÐ¢ÐžÐ’Ðž" Ñ€ÐµÐ½Ð´ÐµÑ€ Ð·Ð°Ð²Ð¸ÑÐ°Ð»

**ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°**: Hit-test Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°Ð» Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑ‚ÑŒÑÑ Ð¿Ð¾ÑÐ»Ðµ ÐºÐ°Ð»Ð¸Ð±Ñ€Ð¾Ð²ÐºÐ¸

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ**:
```javascript
// Ð”Ðž (Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾):
if (hitTestSource) {
  // Hit-test Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐ»ÑÑ Ð²ÑÐµÐ³Ð´Ð°
}

// ÐŸÐžÐ¡Ð›Ð• (Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾):
if (hitTestSource && !isCalibrated) {
  // Hit-test Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð”Ðž ÐºÐ°Ð»Ð¸Ð±Ñ€Ð¾Ð²ÐºÐ¸
}
```

### Ð‘Ð°Ð³ #2: ÐœÐ°ÑˆÐ¸Ð½Ñ‹ ÐµÑ…Ð°Ð»Ð¸ Ð±Ð¾ÐºÐ¾Ð¼ Ð¿Ð¾ÑÐ»Ðµ Ð¿Ð¾Ð²Ð¾Ñ€Ð¾Ñ‚Ð°
**ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°**: Rotation Ð½Ðµ ÑƒÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°Ð» Ð¾Ñ€Ð¸ÐµÐ½Ñ‚Ð°Ñ†Ð¸ÑŽ Ð¼Ð¾Ð´ÐµÐ»Ð¸

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ**:
```javascript
// ÐŸÐ»Ð°Ð²Ð½Ð°Ñ Ð¸Ð½Ñ‚ÐµÑ€Ð¿Ð¾Ð»ÑÑ†Ð¸Ñ ÑƒÐ³Ð»Ð°
this.targetRotation = Math.atan2(dy, dx);
let rotDiff = this.targetRotation - this.currentRotation;

// ÐÐ¾Ñ€Ð¼Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ ÑƒÐ³Ð»Ð°
while (rotDiff > Math.PI) rotDiff -= 2 * Math.PI;
while (rotDiff < -Math.PI) rotDiff += 2 * Math.PI;

// ÐŸÐ»Ð°Ð²Ð½Ð¾Ðµ Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ðµ
this.currentRotation += rotDiff * this.rotationSpeed;

// ÐŸÑ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ñ ÑƒÑ‡ÐµÑ‚Ð¾Ð¼ Ð¾Ñ€Ð¸ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸ Ð¼Ð¾Ð´ÐµÐ»Ð¸
this.model.rotation.y = -this.currentRotation + Math.PI / 2;
```

---

## ðŸš€ Ð Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ

### Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº:
```bash
# ÐŸÑ€Ð¾ÑÑ‚Ð¾Ð¹ HTTP ÑÐµÑ€Ð²ÐµÑ€ (Python)
python server.py

# Ð˜Ð»Ð¸ Python 3
python3 -m http.server 8000

# Ð˜Ð»Ð¸ Node.js
npx http-server -p 8000
```

### Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ:
- **AR Ñ€ÐµÐ¶Ð¸Ð¼**: HTTPS (WebXR Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð·Ð°Ñ‰Ð¸Ñ‰ÐµÐ½Ð½Ñ‹Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚)
- **Ð‘Ñ€Ð°ÑƒÐ·ÐµÑ€Ñ‹**:
  - Chrome 90+ (Android/Desktop)
  - Safari 15+ (iOS)
  - Edge 90+

### Production deploy:
1. Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð½Ð° HTTPS Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³
2. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¿ÑƒÑ‚Ð¸ Ðº Ð°ÑÑÐµÑ‚Ð°Ð¼ (Ð¼Ð¾Ð´ÐµÐ»Ð¸, Ñ‚ÐµÐºÑÑ‚ÑƒÑ€Ñ‹)
3. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÑŒÑÑ Ñ‡Ñ‚Ð¾ CDN ÑÑÑ‹Ð»ÐºÐ¸ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚ (Three.js)

---

## ðŸ“± ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÐ¼Ñ‹Ðµ ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð°

### AR Ñ€ÐµÐ¶Ð¸Ð¼:
- âœ… Android (Chrome, Samsung Internet)
- âœ… iOS 15+ (Safari)
- âŒ Desktop (Ð½ÐµÑ‚ AR ÐºÐ°Ð¼ÐµÑ€Ñ‹)

### TOUCH Ñ€ÐµÐ¶Ð¸Ð¼:
- âœ… Ð’ÑÐµ ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð° Ñ Ñ‚Ð°Ñ‡ÑÐºÑ€Ð¸Ð½Ð¾Ð¼
- âœ… Desktop Ñ Ð¼Ñ‹ÑˆÑŒÑŽ

### GYRO Ñ€ÐµÐ¶Ð¸Ð¼:
- âœ… Ð¡Ð¼Ð°Ñ€Ñ‚Ñ„Ð¾Ð½Ñ‹ Ñ Ð³Ð¸Ñ€Ð¾ÑÐºÐ¾Ð¿Ð¾Ð¼
- âœ… iOS (Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð¼ Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ñ)
- âŒ Desktop (Ð½ÐµÑ‚ Ð³Ð¸Ñ€Ð¾ÑÐºÐ¾Ð¿Ð°)

---

## ðŸŽ¯ Ð‘ÑƒÐ´ÑƒÑ‰Ð¸Ðµ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ñ

1. **Ð˜Ð³Ñ€Ð¾Ð²Ð°Ñ Ð¼ÐµÑ…Ð°Ð½Ð¸ÐºÐ°**:
   - Ð¡Ñ‡ÐµÑ‚ Ð¾Ñ‡ÐºÐ¾Ð²
   - Ð—Ð°Ð´Ð°Ð½Ð¸Ñ (Ð´Ð¾ÑÑ‚Ð°Ð²ÑŒ Ð³Ñ€ÑƒÐ·)
   - ÐŸÑ€ÐµÐ¿ÑÑ‚ÑÑ‚Ð²Ð¸Ñ Ð½Ð° Ð´Ð¾Ñ€Ð¾Ð³Ð°Ñ…

2. **Ð“Ñ€Ð°Ñ„Ð¸ÐºÐ°**:
   - ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ð¸ Ð¼Ð°ÑˆÐ¸Ð½ (ÐºÐ¾Ð»ÐµÑÐ°, ÑÐ¸Ð³Ð½Ð°Ð»Ñ‹)
   - Ð§Ð°ÑÑ‚Ð¸Ñ†Ñ‹ (Ð¿Ñ‹Ð»ÑŒ, Ð´Ñ‹Ð¼)
   - Ð¢ÐµÐ½Ð¸ Ð¾Ñ‚ Ð¼Ð°ÑˆÐ¸Ð½

3. **Ð—Ð²ÑƒÐº**:
   - Ð—Ð²ÑƒÐºÐ¸ Ð¼Ð¾Ñ‚Ð¾Ñ€Ð¾Ð²
   - Ð“ÑƒÐ´ÐºÐ¸
   - Ð¤Ð¾Ð½Ð¾Ð²Ð°Ñ Ð¼ÑƒÐ·Ñ‹ÐºÐ°

4. **ÐœÑƒÐ»ÑŒÑ‚Ð¸Ð¿Ð»ÐµÐµÑ€**:
   - WebRTC Ð´Ð»Ñ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸
   - ÐžÐ±Ñ‰Ð°Ñ Ð´Ð¾Ñ€Ð¾Ð³Ð° Ð´Ð»Ñ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¸Ñ… Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð²

5. **Ð ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€ Ð´Ð¾Ñ€Ð¾Ð³**:
   - Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÐ²Ð¾Ð¸Ñ… ÐºÐ°Ñ€Ñ‚
   - Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ/Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°

---

## ðŸ“ž ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹ Ð¸ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°

**GitHub**: https://github.com/den812/ar-carpet-game

**Ð Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº**: Ð”Ð•Ð’-Ð›Ð˜Ð” Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹

**Ð’ÐµÑ€ÑÐ¸Ñ**: V21 (Ð”ÐµÐºÐ°Ð±Ñ€ÑŒ 2024)

---

## ðŸ“‹ Ð›Ð¸Ñ†ÐµÐ½Ð·Ð¸Ñ

ÐŸÑ€Ð¾ÐµÐºÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚:
- Three.js (MIT License)
- GLB Ð¼Ð¾Ð´ÐµÐ»Ð¸ (Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ/ÑÐ¾Ð±ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ðµ)
- Ð¢ÐµÐºÑÑ‚ÑƒÑ€Ñ‹ ÐºÐ¾Ð²Ñ€Ð° (ÑÐ¾Ð±ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ðµ)

---

*Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð° 27.12.2024*