<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<title>üöó Carpet AR Traffic - –î–µ—Ç—Å–∫–∞—è –ò–≥—Ä–∞</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<script type="importmap">
{
  "imports": {
    "three": "https://cdn.jsdelivr.net/npm/three@0.151.3/build/three.module.js",
    "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.151.3/examples/jsm/",
    "mindar-image-three": "https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-three.prod.js"
  }
}
</script>

<style>
* { box-sizing: border-box; }
body { 
  margin: 0; 
  overflow: hidden; 
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  font-family: 'Comic Sans MS', 'Segoe UI', sans-serif;
  touch-action: none;
}

/* –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω —Å –¥–µ—Ç—Å–∫–∏–º –¥–∏–∑–∞–π–Ω–æ–º */
.overlay {
  position: fixed; 
  inset: 0;
  display: flex; 
  flex-direction: column;
  align-items: center; 
  justify-content: center;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  z-index: 10;
  padding: 5vh;
}

.overlay h1 {
  color: #fff;
  font-size: clamp(24px, 6vw, 48px);
  text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
  margin-bottom: 4vh;
  text-align: center;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ */
button {
  width: clamp(180px, 50vw, 280px);
  height: clamp(50px, 12vh, 80px);
  font-size: clamp(16px, 4vw, 24px);
  margin: 1.5vh 0;
  border-radius: clamp(12px, 3vw, 20px);
  border: 3px solid #fff;
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  color: #fff;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 6px 20px rgba(0,0,0,0.2);
}

button:active {
  transform: scale(0.95);
  box-shadow: 0 3px 10px rgba(0,0,0,0.3);
}

/* –ö–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤ */
#mode-ui {
  position: fixed; 
  bottom: clamp(12px, 3vh, 24px);
  left: 50%;
  transform: translateX(-50%);
  display: flex; 
  gap: clamp(8px, 2vw, 16px);
  z-index: 5;
}

#mode-ui button {
  width: clamp(48px, 12vw, 72px);
  height: clamp(48px, 12vw, 72px);
  font-size: clamp(20px, 5vw, 32px);
  border-radius: 50%;
  padding: 0;
  margin: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* –°—á–µ—Ç—á–∏–∫ –º–∞—à–∏–Ω–æ–∫ */
#car-counter {
  position: fixed;
  top: clamp(12px, 3vh, 24px);
  right: clamp(12px, 3vh, 24px);
  background: rgba(0,0,0,0.6);
  color: #fff;
  padding: clamp(8px, 2vw, 16px);
  border-radius: clamp(8px, 2vw, 12px);
  font-size: clamp(14px, 3.5vw, 20px);
  font-weight: bold;
  z-index: 5;
}

/* –ü–∞–Ω–µ–ª—å –º–∞—Å—à—Ç–∞–±–∞ */
#scale-control {
  position: fixed;
  top: clamp(12px, 3vh, 24px);
  left: clamp(12px, 3vh, 24px);
  background: rgba(0,0,0,0.8);
  color: #fff;
  padding: clamp(10px, 2.5vw, 16px);
  border-radius: clamp(8px, 2vw, 12px);
  font-size: clamp(12px, 3vw, 16px);
  z-index: 5;
  min-width: 200px;
  max-width: 300px;
}

#scale-control label {
  display: block;
  margin-bottom: 8px;
  font-weight: bold;
}

#scale-control input[type="range"] {
  width: 100%;
  margin: 8px 0;
}

#scale-control .scale-value {
  display: inline-block;
  background: rgba(255,255,255,0.2);
  padding: 4px 8px;
  border-radius: 4px;
  margin-left: 8px;
  font-family: monospace;
}

#scale-control button {
  width: 100%;
  height: 36px;
  font-size: clamp(12px, 3vw, 14px);
  margin-top: 8px;
  padding: 0;
}

/* –ó–∞–≥—Ä—É–∑–∫–∞ */
.loading {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
  color: #fff;
  font-size: clamp(18px, 4vw, 28px);
}
</style>
</head>

<body>

<!-- –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω -->
<div id="start" class="overlay">
  <h1>üöó –ú–∞—à–∏–Ω–∫–∏ –Ω–∞ –ö–æ–≤—Ä–µ üéÆ</h1>
  <button data-mode="AR">üì∑ AR –†–µ–∂–∏–º</button>
  <button data-mode="GYRO">üß≠ –î–≤–∏–≥–∞—Ç—å –¢–µ–ª–µ—Ñ–æ–Ω</button>
  <button data-mode="TOUCH">‚úã –ü–∞–ª—å—Ü–µ–º</button>
</div>

<!-- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ -->
<div id="mode-ui" hidden>
  <button data-mode="AR" title="AR –†–µ–∂–∏–º">üì∑</button>
  <button data-mode="GYRO" title="–ì–∏—Ä–æ—Å–∫–æ–ø">üß≠</button>
  <button data-mode="TOUCH" title="–ü–∞–ª—å—Ü–µ–º">‚úã</button>
</div>

<!-- –°—á–µ—Ç—á–∏–∫ –º–∞—à–∏–Ω–æ–∫ -->
<div id="car-counter" hidden>üöó x 0</div>

<!-- –ü–∞–Ω–µ–ª—å –º–∞—Å—à—Ç–∞–±–∞ (–í–ê–ñ–ù–û: —ç—Ç–æ—Ç –±–ª–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å!) -->
<div id="scale-control" hidden>
  <label>üîß –ú–∞—Å—à—Ç–∞–± –º–∞—à–∏–Ω–æ–∫:</label>
  <input type="range" id="scale-slider" min="0.005" max="0.10" step="0.001" value="0.015">
  <div>
    –¢–µ–∫—É—â–∏–π: <span class="scale-value" id="scale-display">0.015</span>
  </div>
  <button id="apply-scale">‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
  <button id="reset-scale">üîÑ –°–±—Ä–æ—Å</button>
</div>

<script type="module" src="./src/main.js"></script>
</body>
</html>